
<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="renderer" content="webkit|ie-comp|ie-stand">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0-SNAPSHOT,maximum-scale=1.0-SNAPSHOT,user-scalable=no" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <title>聚合支付平台 - 用户管理</title>
  <link rel="stylesheet" type="text/css" href="../../css/reset.css">
  <link rel="stylesheet" type="text/css" href="../../css/easyui.css">
  <link rel="stylesheet" type="text/css" href="../../css/icon.css">
  <link rel="stylesheet" type="text/css" href="../../css/color.css">
  <link rel="stylesheet" type="text/css" href="../../css/ul.base.css">
  <link rel="stylesheet" type="text/css" href="../../css/add.css">
  <script type="text/javascript" src="../../js/jquery.min.js"></script>
  <script type="text/javascript" src="../../js/jquery.easyui.min.js"></script>
  <script type="text/javascript" src="../../js/reset_win.js"></script>
  <script type="text/javascript" src="../../js/ulmsale/ul.enums.js"></script>
  <script type="text/javascript" src="../../js/ulmsale/ul.base.js"></script>
  <script src="../../js/layer/layer.js"></script>
</head>

<body>
<h1 class="title clearfix" class="title clearfix"><span class="fl">角色管理</span> <span class="point">·</span> <span class="fl">添加角色</span></h1>

<div class="toolbar">
  <h3 class="tit">新建角色</h3>
  <div class="list clearfix">
    <div class="item clearfix">
      <lable class="name">角色姓名：</lable>
      <input type="text" placeholder="请输入角色姓名"/>
    </div>
    <div class="item clearfix headRadio" >
      <lable>角色状态：</lable>
      <input id="open" name="roleStatus" type="radio" checked />
      <label for="open">启用</label>
      <input id="close" name="roleStatus" type="radio" />
      <label for="close">关闭</label>
    </div>
    <div class="item clearfix" style="margin-left: 20px;">
      <lable>角色类型：</lable>
      <select name="" id="">
        <option value="">dwds</option>
        <option value="">dwds</option>
        <option value="">dwds</option>
      </select>
    </div>
  </div>

  <div class="content">
    <h3 class="tit">选择角色权限</h3>
    <div class="list clearfix">
      <div class="checkAll">
        <input id="checkAll1" type="checkbox" onclick="selectOneMemu(this)" value="1" />
        <label for="checkAll1">销售管理</label>
      </div>

      <div class="itemWalp clearfix">

        <div class="item">
          <h5>
            <input id="checkAllItem11" onclick="selectTwoMemu('1',this)" value="11" type="checkbox" />
            <label for="checkAllItem11">销售管理</label>
          </h5>
          <ul class="selected">
            <li><input onclick="selectThreeMenu('1',this)" id="checkItem10" value="111" type="checkbox"/><label for="checkItem10">查看全部空房源</label></li>
            <li><input onclick="selectThreeMenu('1',this)" id="checkItem11" value="112" type="checkbox"/><label for="checkItem11">销售管理</label></li>
            <li><input onclick="selectThreeMenu('1',this)" id="checkItem12" value="113" type="checkbox"/><label for="checkItem12">销售管理</label></li>
            <li><input onclick="selectThreeMenu('1',this)" id="checkItem13" value="114" type="checkbox"/><label for="checkItem13">销售管理</label></li>
          </ul>
        </div>

        <div class="item">
          <h5>
            <input id="checkAllItem12" onclick="selectTwoMemu('1',this)" type="checkbox" value="12" />
            <label for="checkAllItem12">销售管理</label>
          </h5>
          <ul class="selected">
            <li><input onclick="selectThreeMenu('1',this)" value="121" id="checkItem20" type="checkbox"/><label for="checkItem20">查看全部空房源</label></li>
            <li><input onclick="selectThreeMenu('1',this)" value="122" id="checkItem21" type="checkbox"/><label for="checkItem21">销售管理</label></li>
            <li><input onclick="selectThreeMenu('1',this)" value="123" id="checkItem22" type="checkbox"/><label for="checkItem22">销售管理</label></li>
            <li><input onclick="selectThreeMenu('1',this)" value="124" id="checkItem23" type="checkbox"/><label for="checkItem23">销售管理</label></li>
          </ul>
        </div>

      </div>
    </div>

    <div class="list clearfix">
      <div class="checkAll">
        <input id="checkAll2" type="checkbox" onclick="selectOneMemu(this)" value="2" />
        <label for="checkAll2">销售管理</label>
      </div>

      <div class="itemWalp clearfix">

        <div class="item">
          <h5>
            <input id="checkAllItem21" onclick="selectTwoMemu('1',this)" value="11" type="checkbox" />
            <label for="checkAllItem21">销售管理</label>
          </h5>
          <ul class="selected">
            <li><input onclick="selectThreeMenu('2',this)" id="checkItem30" value="111" type="checkbox"/><label for="checkItem30">查看全部空房源</label></li>
            <li><input onclick="selectThreeMenu('2',this)" id="checkItem31" value="112" type="checkbox"/><label for="checkItem31">销售管理</label></li>
            <li><input onclick="selectThreeMenu('2',this)" id="checkItem32" value="113" type="checkbox"/><label for="checkItem32">销售管理</label></li>
            <li><input onclick="selectThreeMenu('2',this)" id="checkItem33" value="114" type="checkbox"/><label for="checkItem33">销售管理</label></li>
          </ul>
        </div>

      </div>
    </div>

  </div>
  <script>


      //单击一级权限
      function selectOneMemu(self) {
          var selectValue = [];
          var parentDom = $(self).parents('div.list.clearfix')
          var parentDomWalp = $(self).parents('div.content')
          if(self.checked){
              parentDom.find('input:checkbox').prop("checked", true);
              var arrDom = parentDomWalp.find('input:checked')
              for(i=0; i<arrDom.length; i++){
                  selectValue.push($(arrDom[i]).val())
              }
              console.log(selectValue)
          }else{
              selectValue = [];
              parentDom.find('input:checkbox').prop("checked", false);
              var arrDom = parentDomWalp.find('input:checked')
              for(i=0; i<arrDom.length; i++){
                  selectValue.push($(arrDom[i]).val())
              }
              console.log(selectValue)
          }
      }

      //单击二级权限
      function selectTwoMemu(oneId,self) {
          var selectValue = [];
          //计算二级菜单的长度
          var twoMenuLenght = $(self).parents('.itemWalp').find('.item h5').length
          //计算二级菜单被选中的长度
          var twoMenuCheckedLenght = $(self).parents('.itemWalp').find('.item h5 input:checked').length
          var parentDom = $(self).parents('div.list.clearfix')
          var parentDomWalp = $(self).parents('div.content')
          if(self.checked){
              $(self).parents('.item').find('input:checkbox').prop("checked", true);
              $(self).parents('.list').find('#checkAll'+oneId).prop("checked", true)

              var arrDom = parentDomWalp.find('input:checked')
              for(i=0; i<arrDom.length; i++){
                  selectValue.push($(arrDom[i]).val())
              }
              console.log(selectValue)

          }else{
              $(self).parents('.item').find('input:checkbox').prop("checked", false);
              if(twoMenuCheckedLenght == 0){
                  $(self).parents('.list').find('#checkAll'+oneId).prop("checked", false)
              }else{
                  $(self).parents('.list').find('#checkAll'+oneId).prop("checked", true)
              }
              var arrDom = parentDomWalp.find('input:checked')
              for(i=0; i<arrDom.length; i++){
                  selectValue.push($(arrDom[i]).val())
              }
              console.log(selectValue)
          }
      }

      //单击三级权限
      function selectThreeMenu(oneId,self) {

          var parentDom = $(self).parents('div.list.clearfix')
          var parentDomWalp = $(self).parents('div.content')
          var selectValue = [];
          if(self.checked){
              //$('#checkAllItem'+twoId).prop("checked", true);
              $(self).parents('.item').find('h5 input').prop("checked", true)
              $(self).parents('.list').find('#checkAll'+oneId).prop("checked", true)
              var arrDom = parentDomWalp.find('input:checked')
              for(i=0; i<arrDom.length; i++){
                  selectValue.push($(arrDom[i]).val())
              }
              console.log(selectValue)

          }else{
              var check3Lentht = $(self).parents('ul').find('li input:checked').length;
              if(check3Lentht == 0){
                  $(self).parents('.item').find('h5 input').prop("checked", false)
              }else{
                  $(self).parents('.item').find('h5 input').prop("checked", true)
              }
              var check2Lentht = $(self).parents('.itemWalp').find('.item h5 input:checked').length;
              if(check2Lentht == 0){
                  $('#checkAll'+oneId).prop("checked", false);
              }else{
                  $('#checkAll'+oneId).prop("checked", true);
              }
              var arrDom = parentDomWalp.find('input:checked')
              for(i=0; i<arrDom.length; i++){
                  selectValue.push($(arrDom[i]).val())
              }
              console.log(selectValue)
          }

      }


  </script>
  <a class="commitForm" href="javascript:;">确定添加</a>
</div>
</div>


</body>
</html>
